# 重点区域信息采集APP后台管理功能说明书

## QUICK START
安装clojure(http://clojure.org/guides/getting_started), 和lein(http://leiningen.org/). 
然后执行:
```bash
$ lein ring uberwar 
```
来生成war文件。然后部署到tomcat即可。
如果是在开发模式下，直接执行:
```bash
$ lein ring server即可
```

## 概述
本管理后台包含如下功能模块:

    * APK版本发布相关
    * 组织管理
    * 信息点模板管理
    * 用户上传数据管理功能
    * 用户数据上传接口

本管理后台和客户端应用的应用升级，模板文件升级，重点区域数据上传功能直接相关。

## APK版本发布相关

用户输入版本号，形式必须是"x.y.z"， 以及客户端软件包，提交后，形成新的版本。接口"获取最新apk版本"会返回该新版本。
提交新版本的限制条件包括:

    * 版本号必须是"x.y.z"形式
    * 版本号不能和之前版本重复
    * 版本号不能小于某个之前版本。小于的定义是从左到右，将"x.y.z"分割成三个数字X, Y, Z， 其中X的权重大于Y大于Z，逐级按数字大小比较。
同时，之前的所有版本都会罗列出来，供下载或者删除。

## 组织管理
本功能模块和客户端没有直接关系，仅仅用于辅助信息点模板管理和用户上传数据管理。
用户输入组织名称/代码，提交后创建成功。

提交新的组织的限制条件包括:
   
    * 必须是唯一的组织代码
    
## 信息点模板管理功能

用户输入如下信息创建信息点类型模板:

    * 名称
    * 组织
    * 字段列表, 其中字段类型只包含: 字符串，图片，视频
    * 默认图标
    * 激活态图标

提交后创建成功。

创建信息点模板的受限条件包括:

    * 名称必须唯一
    * 所有字段不能为空

同时支持修改/删除已有的信息点模板。
为了支持手动拷贝信息点模板，支持直接下载信息点模板。

## 用户上传数据管理功能

按组织->用户->重点区域的顺序罗列所有上传数据，并且支持数据下载。

## 用户上传数据接口
略


## 对外接口列表
    * 获取最新apk版本 - app/version/latest
    * 获取最新的信息点模板列表 - poi-type/list
    * 上传区域信息接口 - region/object
